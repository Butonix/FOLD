<template name="create">
	<header class="header">
		<div class="story-title editable" contenteditable="true">
			{{storyTitle}}
		</div>
		<div class="username">
			{{username}}
		</div>
		<div class="logo">
			<a href="/">
				<img src="/logo.png">
			</a>
		</div>
	</header>
	{{#if storyLoaded}}
	    <article class="content">
	    	<div class="vertical-narrative">
	    		{{> vertical_narrative}}
	    		<div class="spacer">
	    		</div>
	    	</div>
	    	<div class="horizontal-context">
	    		{{> horizontal_context}}
	    	</div>
	    	{{> create_options}}
	    </article>
	    {{> connector}}
	    {{#if horizontalExists}}
	        <div class="browser-offset">
	        	{{> story_browser}}
	        </div>
        {{/if}}
    {{/if}}
</template>

<template name="create_options">
	<div class="button-options save-publish">
		<div id="save" class="button">
			Save
		</div>
		<div id="delete" class="button">
			Delete
		</div>
		<div id="publish" class="button">
			Publish
		</div>
	</div>
</template>

<template name="vertical_narrative">
	{{#each verticalSections}}
    	{{> vertical_section_block}}
	{{/each}}	
	{{> add_vertical}}
</template>

<template name="add_vertical">
	<section class="narrative-section new-section">
		<i class="fa fa-plus-circle"></i>
	</section>
</template>

<template name="add_horizontal">
	<section class="narrative-section new-section horizontal-new-section">
		<i class="fa fa-plus-circle"></i>
	</section>
</template>

<template name="horizontal_context">
	{{#if verticalExists}}
    	{{> add_horizontal}}
    {{/if}}
	{{#each horizontalSections}}
	    {{#if horizontalShown}}
	        {{#each data}}
        	    {{> horizontal_section_block}}
    	    {{/each}}
	    {{/if}}
	{{/each}}
</template>

<template name="connector">
	<div class="connector">
	</div>
</template>

<template name="vertical_section_block">
	<section class="narrative-section vertical-narrative-section{{#if verticalSelected}} selected{{/if}} {{evenOrOdd}}" data-vertical-index="{{index}}">
		<div class="size-icons">
			<div class="size-icon plus hidden">+</div>
			<div class="size-icon minus">&mdash;</div>
		</div>
		<div class="title editable" contenteditable="true">{{title}}</div>
		<div class="content editable" contenteditable="true">
			<p>{{content}}</p>
			<img src="{{image}}" />
		</div>
	</section>
</template>

<template name="horizontal_section_buttons">
	<div class="content-icons">
		<div class="row row-one">
			<div class="box"><img class="text-button" src="/text-icon.png" /></div>
			<div class="box"><img class="photo-button" src="/photo-icon.png" /></div>
			<div class="box"><img class="map-button" src="/map-icon.png" /></div>
			<span class="stretch"></span>
		</div>
		<div class="row row-two">
			<div class="box"><img class="youtube-button" src="/youtube-icon.png" /></div>
			<div class="box"><img class="gifgif-button" src="/gifgif-icon.png" /></div>
			<div class="box"><img class="audio-button" src="/audio-icon.png" /></div>
			<span class="stretch"></span>
		</div>
	</div>
</template>

<template name="create_section_options">
	<div class="button-options back-save">
		<div id="back" class="button">
			Back
		</div>
		<div id="save" class="button">
			Save
		</div>
	</div>
</template>

<!-- Create Templates -->

<template name="create_text_section">
	<div class="create-section">
    	<div class="input-label">
    		ADD FREE TEXT:
    	</div>
    	<textarea class="text-input">{{content}}</textarea>
    	{{> create_section_options}}
    </div>
    <img class="text-button content-type-button" src="/text-icon.png" />
</template>

<template name="create_image_section">
	<div class="create-section">
	    <div class="input-label">IMAGE URL:</div>
	    <input class="image-url-input" value="{{url}}">
	    <div class="input-label">DESCRIPTION:</div>
	    <input class="image-description-input" value="{{description}}">
    	{{> create_section_options}}
    </div>
    <img class="photo-button content-type-button" src="/photo-icon.png" />
</template>

<template name="create_map_section">
	<div class="create-section">
	    <div class="input-label">LOCATION:</div>
	    <input class="location-input">
    
	    <div class="input-label">MAP TYPE:</div>
	    <input class="map-type-input">
    
	    <div class="input-label">DESCRIPTION:</div>
	    <input class="map-description-input">
	    {{> create_section_options}}
	</div>
	<img class="map-button content-type-button" src="/map-icon.png" />
</template>

<template name="create_youtube_section">
	<div class="input-label">YOUTUBE LINK:</div>
	<input class="youtube-link-input">

	<div class="input-label">DESCRIPTION:</div>
	<input class="youtube-description-input">

	<img class="map-button content-type-button" src="/youtube-icon.png" />
	{{> create_section_options}}
</template>

<template name="create_audio_section">
	<div class="create-section">
	    <div class="input-label">SOUNDCLOUD LINK:</div>
	    <input class="soundcloud-link-input">
    
	    <div class="input-label">DESCRIPTION:</div>
	    <input class="soundcloud-description-input">
	    {{> create_section_options}}

    </div>
    <img class="map-button content-type-button" src="/audio-icon.png" />
</template>

<template name="create_gifgif_section">
	<div class="input-label">CHOOSE AN EMOTION:</div>

	<div class="input-label">DESCRIPTION:</div>
	<input class="gifgif-description-input">

	<img class="map-button content-type-button" src="/gifgif-icon.png" />
	{{> create_section_options}}
</template>

<!-- Display Templates -->
<template name="display_text_section">
	<div class="text-section">
    	{{content}}
    </div>
	{{> horizontal_section_edit_delete}}
</template>

<template name="display_image_section">
	<div class="image-section">
		<img src="{{url}}" />
		<div class="description-overlay">
    		{{description}}
    	</div>
	</div>
	{{> horizontal_section_edit_delete}}
</template>

<template name="horizontal_section_edit_delete">
	<div class="button-options edit-delete">
		<div id="edit" class="button">
			Edit
		</div>
		<div id="delete" class="button">
			Delete
		</div>
	</div>
</template>

<template name="horizontal_section_block">
	<section class="narrative-section horizontal-narrative-section" data-index={{index}}>
		{{#if type}}
		    {{#if text}}{{> display_text_section}}{{/if}}
		    {{#if image}}{{> display_image_section}}{{/if}}
		    {{#if map}}{{> display_map_section}}{{/if}}
		{{else}}
    		{{> horizontal_section_buttons}}
    	{{/if}}
	</section>
</template>